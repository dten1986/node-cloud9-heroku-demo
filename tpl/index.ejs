<!DOCTYPE html>
<html>
<head>
	<script src="/bower/bower_components/jquery/jquery.js"></script>
	<script src="/bower/bower_components/underscore/underscore.js"></script>
	<link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>

<!-- <button class="remove">Удалить</button> -->
	<h1>The List</h1>
	<% block('header', "Test header2") %>
	<h2><%=blocks.header %></h2>
    <ul class="list-wrapper"></ul>
	<form class="form">
		<input name="input" class="input" placeholder="What do you wish?.." />
		<button type="submit" class="submit">Submit</button>
	</form>
	
	<script>
	    function getList() {
        	$.getJSON('/items/list', function(data) {
    	        $(data).each(function(num) {
    	   
    	            var item = '<li class="item_no_' + num + '">' +
                                    '<input type="checkbox" class="checkbox">' +
                                        '<span>' + this.date + '</span>' +
                                        '<span class="text">' + this.text + '</span>' +
                                        '<button class="remove" onClick="removeClicker()">Remove</button>' +
                                    '</input>' +
                                '</li>';
                    $(item).appendTo('.list-wrapper');   
    	        });
    	    });
	    };
	    
	    getList();
		  
		$('.form').on('submit', function() {
			$.ajax({
				url: '/items/add',
				method: 'POST',
				data: $(this).serialize(),
				complete: function() {
				    $('.list-wrapper').empty();
				    getList();
				}
			});
			
			return false;
		});
		
	
		
	   function removeClicker() {
	       alert('1234');
	   };
 
	</script>
	
</body>
</html>
